<!DOCTYPE html>
<html>
<head>
<script src="jquery-1.9.1.min.js"></script>
<script src="connection_mgr.js"></script>
<script src="story_cam.js"></script>

<script>
$(document).ready(function(){
	//var data_obj = { a: "abc", b: "bbb"};
	$("button").click(function(){
		/*
		$.get("/internal/commands", data_obj, function(data,status){
		  alert("Data: " + data + "\nStatus: " + status);
		});
		
		$.ajax({
			url: "/internal/commands",
			type: "GET",
			headers:  data_obj
		}).done( function(data,status){
			alert("Data: " + data + "\nStatus: " + status);
		});*/
		connectionMgr.connectToMainServer('browser_controlling_cam_0', 'LOCAL_BROWSER', function( commandID, resDataBody ){
			if (resDataBody.command == "START_RECORDING") {
				storyCam.startRecording(resDataBody.parameters.movieProjectID, function(result){
					var answerObj = {
						err: result.err,
					};
					connectionMgr.answerMainServer(commandID, answerObj);							
				});
			}
			else if (resDataBody.command == "STOP_RECORDING") {
				storyCam.stopRecording( function(result){
					var answerObj = {
						err: result.err,
					};
					connectionMgr.answerMainServer(commandID, answerObj);							
				});
			};
		
		});		
		
	});
});
</script>
</head>
<body>

<button> Start long polling </button>

</body>
</html>